---
interface Props {
  href?: string;
  text?: string;
  class?: string;
  variant?: "standard" | "large";
  theme?: "default" | "solid";
  reload?: boolean;
  bannerName?: string;
  target?: string;
  rel?: string;
}

const {
  href = "/request-an-appointment",
  text = "Get in touch",
  class: className = "",
  variant = "standard",
  theme = "default",
  reload = false,
  bannerName,
  ...rest
} = Astro.props;
const isTiresPage = href === "/buy-new-tires" || href === "/buy-new-tires/";
---

<a
  href={href}
  data-astro-reload={reload || isTiresPage || undefined}
  data-banner-name={bannerName}
  {...rest}
  class:list={[
    "btn-cta-premium group relative inline-flex items-center gap-2 rounded-full px-2 py-1.5 transition-all duration-300 ease-out hover:scale-105 shadow-md",
    theme === "solid" ? "theme-solid" : "theme-default",
    className,
  ]}
>
  <!-- Text Section with Vertical Scroll -->
  <span class="relative h-5 overflow-hidden pl-4 pr-1">
    <span
      class="flex flex-col transition-transform duration-500 ease-out group-hover:-translate-y-1/2"
    >
      <span
        class="btn-text flex h-5 items-center whitespace-nowrap text-sm font-black uppercase tracking-[0.15em]"
      >
        {text}
      </span>
      <span
        class="btn-text flex h-5 items-center whitespace-nowrap text-sm font-black uppercase tracking-[0.15em]"
      >
        {text}
      </span>
    </span>
  </span>

  <!-- Icon Circle Badge with Horizontal Slide -->
  <div
    class="badge relative flex items-center justify-center overflow-hidden h-8 w-8 rounded-full"
  >
    <!-- First Arrow -->
    <div
      class="flex h-full w-full items-center justify-center transition-transform duration-500 ease-out group-hover:translate-x-full"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="3"
        stroke="currentColor"
        class="btn-icon h-3.5 w-3.5"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5"></path>
      </svg>
    </div>
    <!-- Entering Arrow -->
    <div
      class="absolute inset-0 flex items-center justify-center -translate-x-full transition-transform duration-500 ease-out group-hover:translate-x-0"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="3"
        stroke="currentColor"
        class="btn-icon h-3.5 w-3.5"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5"></path>
      </svg>
    </div>
  </div>
</a>

<style>
  .btn-cta-premium {
    /* Define Theme Variables */
    --btn-bg: #ffffff;
    --btn-text: var(--color-queens-primary);
    --btn-badge-bg: var(--color-queens-primary);
    --btn-icon-color: #ffffff;

    background-color: var(--btn-bg);
    transition: all 0.3s ease-out;
  }

  /* Theme: Default */
  .theme-default {
    --btn-bg: #ffffff;
    --btn-text: var(--color-queens-primary);
    --btn-badge-bg: var(--color-queens-primary);
    --btn-icon-color: #ffffff;
  }

  /* Theme: Solid */
  .theme-solid {
    --btn-bg: var(--color-queens-primary);
    --btn-text: #ffffff;
    --btn-badge-bg: #ffffff;
    --btn-icon-color: var(--color-queens-primary);
  }

  /* Applying styles */
  .btn-text {
    color: var(--btn-text);
  }
  .badge {
    background-color: var(--btn-badge-bg);
  }
  .btn-icon {
    color: var(--btn-icon-color);
  }

  /* Dark Mode Overrides */
  :global(.dark) .theme-default {
    --btn-bg: var(--color-queens-primary);
    --btn-text: #ffffff;
    --btn-badge-bg: #0b1121; /* Queens Navy */
    --btn-icon-color: #ffffff;
  }

  :global(.dark) .theme-solid {
    --btn-bg: #ffffff;
    --btn-text: var(--color-queens-primary);
    --btn-badge-bg: var(--color-queens-primary);
    --btn-icon-color: #ffffff;
  }
</style>
